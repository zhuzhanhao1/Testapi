<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>接口测试平台</title>
	<link rel="icon" href="./../static/images/favicon%202.ico">
	<link rel="stylesheet" href="./../static/css/layui.css">
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<link href="./../static/bootstrap-3.3.7-dist/css/bootstrap.min.css">
	<script src="./../static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	<script src="./../static/js/layui/layui.js"></script>
	<link rel="stylesheet" href="./../static/font-awesome-4.7.0/css/font-awesome.min.css">
	<script src="http://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<style>
		#casetitle {
			font-size: 24px;
			padding: 0px;
			margin-left: -5px;
			color: white;
		}

		#casetitle:hover {
			color: #FFB800;
		}

		.layui-form-item {
			margin-bottom: 10px;
		}

		.layui-bg-black {
			background-color: #23262E !important;
		}

		.layui-nav {
			background-color: #23262E;
		}

		.kit-side-fold {
			font-size: 18px;
			text-align: center;
		}

		#sousuo {
			position: fixed;
			right: 15px;
			top: 80px;
		}

		.layui-laypage .layui-laypage-curr .layui-laypage-em {
			background-color: #FFB800;
		}

		.layui-layout-admin .layui-header {
			background-color: black;
		}
	</style>
</head>
<body>


<div class="modal fade">
	<div class="modal-content">
		<div class="modal-header">
			<h6 class="modal-title" id="myModalLabel1" style="font-size: 20px"><strong>快速测试</strong></h6>
		</div>

		<div class="modal-body">
			<form role="form" class="form-group" method="POST" id="form">
				<!--
				<label for="modelname">模块名</label>
				<input type="text" name="modelname" class="form-control" id="modelname" placeholder="模块名">
				<label for="casename">用例名</label>
				<input type="text" name="casename" class="form-control" id="casename" placeholder="用例名">
				-->

				<select role="menu" class="form-control" name="addMethod" id="addMethod">
					<option>Get</option>
					<option>Post</option>
					<option>Delete</option>
					<option>Path</option>
					<option>Put</option>
				</select>

				<input type="text" name="addUrl" class="form-control" maxlength="300" id="addUrl" placeholder="url">
				<div class="form-group" id="addheadersdiv">
					<label for="headers">Headers</label>
					<ul id="headers" style="list-style-type: none">
						<li>
							<input id="headers_data" class="addheaders" maxlength="300" name="headers_key" type="text" placeholder="Key"/>
							<input class="addheaders" name="headers_value" type="text" placeholder="Value"/>
							<input id="addheaders" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="+">
							<input id="delheaders" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="-">
							<input id="addmergeheaders" type="text" style="display:None" maxlength="500"
								   name="addmergeheaders"/>
						</li>
					</ul>
				</div>
				<div class="form-group" id="addformdatadiv">
					<label for="formdatas">Formdata</label>
					<ul id="formdatas" style="list-style-type: none">
						<li>
							<input type="text" class="addformdata" maxlength="300" name="formdatas_key"
								   placeholder="Key"/><input type="text" class="addformdata" name="formdatas_value"
															 placeholder="Value"/>
							<input id="addformdata" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="+">
							<input id="delformdata" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="-">
							<input id="addmergeformdatas" type="text" style="display:None" maxlength="500"
								   name="addmergeformdatas"/>
						</li>
					</ul>
				</div>
				<!--
				<div class="form-group" id="addcheckdatadiv">
					<label for="checkdatas">Assert</label>
					<ul id="checkdatas" style="list-style-type: none">
						<li>
							<input type="text" class="addformdata" name="checkdatas_key" placeholder="Key"/><input
								type="text" name="checkdatas_value" class="addformdata" placeholder="Value"/>
							<input id="addcheckdata" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="+">
							<input id="delcheckdata" type="button" class="btn btn-default"
								   style="height:24px;width:24px;text-align:center; margin:0px; padding:0px;" value="-">
							<input id="addmergecheckdatas" type="text" style="display:None" name="addmergecheckdatas"/>
						</li>
					</ul>
				</div>
				<label for="charger">负责人</label>
				<input type="text" name="charger" class="form-control" id="charger" placeholder="负责人">
				-->
				<div class="modal-footer">
					<button type="submit" class="layui-btn layui-btn-lg layui-btn-warm" data-dismiss="modal" id="addsubmitBtn">提交
					</button>
				</div>
			</form>
		</div>
	</div>
</div>



<script>

    //增加headers行列
    $(function () {
        $("#addheaders").click(function () {
            console.log("我被点击啦");
            $("#headers").append("<li><input   type=\"text\" name=\"headers_key\"  placeholder=\"Key\"  /><input   type=\"text\" name=\"headers_value\"  placeholder=\"Value\" /></li>");
        });
        $("#delheaders").click(function () {
            if ($("#headers li").length > 1) {
                $("#headers li:last").remove();
            }
        })
    });
    //增加formdata行列
    $(function () {
        $("#addformdata").click(function () {
            $("#formdatas").append("<li><input   type=\"text\" name=\"formdatas_key\" placeholder=\"Key\"  /><input   type=\"text\" name=\"formdatas_value\" placeholder=\"Value\" /></li>");
        });
        $("#delformdata").click(function () {
            if ($("#formdatas li").length > 1) {
                $("#formdatas li:last").remove();
            }
        })
    });
    //增加验证项
    $(function () {
        $("#addcheckdata").click(function () {
            $("#checkdatas").append("<li><input   type=\"text\" name=\"checkdatas_key\" placeholder=\"Key\"  /><input   type=\"text\" name=\"checkdatas_value\" placeholder=\"Value\" /></li>");
        });
        $("#delcheckdata").click(function () {
            if ($("#checkdatas li").length > 1) {
                $("#checkdatas li:last").remove();
            }
        });
    });
    $("#addsubmitBtn").click(function () {
        var objone = {};
        var a = document.querySelectorAll("input[name='headers_key']");
        var b = document.querySelectorAll("input[name='headers_value']");
        for (var i = 0; i < a.length; i++) {
            var keyone = a[i].value;
            var valueone = b[i].value;
            objone[keyone] = valueone;
        }
        objonestring = JSON.stringify(objone);
        $("#addmergeheaders").val(objonestring);
        console.info(objonestring);
        var objthree = {};
        var e = document.querySelectorAll("input[name='formdatas_key']");
        var f = document.querySelectorAll("input[name='formdatas_value']");
        for (var k = 0; k < e.length; k++) {
            var keythree = e[k].value;
            var valuethree = f[k].value;
            objthree[keythree] = valuethree;
        }
        objthreestring = JSON.stringify(objthree);
        $("#addmergeformdatas").val(objthreestring);
        var objfour = {};
        var g = document.querySelectorAll("input[name='checkdatas_key']");
        var h = document.querySelectorAll("input[name='checkdatas_value']");
        for (var l = 0; l < g.length; l++) {
            var keyfour = g[l].value;
            var valuefour = h[l].value;
            objfour[keyfour] = valuefour;
        }
        objfourstring = JSON.stringify(objfour);
        $("#addmergecheckdatas").val(objfourstring);
    });
    $('#addsubmitBtn').click(function go_add(id) {
        $.ajax({
            cache: false,
            url: "add_singel_data/",
            dataType: 'text',
            type: 'POST',
            async: false,
            data: {
                "modelname": $("#modelname").val(),
                "casename": $("#casename").val(),
                "addURL": $("#addUrl").val(),
                "Method": $("#addMethod").val(),
                "addmergeheaders": $("#addmergeheaders").val(),
                "addmergeformdatas": $("#addmergeformdatas").val(),
                "addmergecheckdatas": $("#addmergecheckdatas").val(),
                "charger": $("#charger").val(),
            },
            success: function (data) {
                alert("提交成功");
                window.location.reload();
                console.log(data);
            },
            error: function (data) {
                console.log(data);
                alert("数据重复/提交失败");
            }
        })
    });

    function go_delete(id) {
        $.ajax({
            cache: false,
            url: "delete_id/",
            dataType: 'text',
            type: 'POST',
            async: false,
            data: {
                "id": id
            },
            success: function (data) {
                alert('删除成功');
                window.location.reload()
            },
            error: function (data) {
                console.log(data);
                alert('删除失败')
            }
        })
    }

    //修改项中添加headers行
    $("#change_addheaders").click(function () {
        $("#changeheaders").append("<li><input   type=\"text\" name=\"change_headers_key\"  placeholder=\"Key\"  /><input   type=\"text\" name=\"change_headers_value\"  placeholder=\"Value\" /></li>");
    });
    $("#change_delheaders").click(function () {
        if ($("#changeheaders li").length > 1) {
            $("#changeheaders li:last").remove();
        }
    });
    $("#change_delparams").click(function () {
        if ($("#changeparams li").length > 1) {
            $("#changeparams li:last").remove();
        }
    });
    //修改项中添加formdatas行
    $("#change_addformdata").click(function () {
        $("#changeformdatas").append("<li><input   type=\"text\" name=\"change_formdata_key\"  placeholder=\"Key\"  /><input   type=\"text\" name=\"change_formdata_value\"  placeholder=\"Value\" /></li>");
    });
    $("#change_delformdata").click(function () {
        if ($("#changeformdatas li").length > 1) {
            $("#changeformdatas li:last").remove();
        }
    });
    //修改项中添加checkdatas行
    $("#change_addcheckdata").click(function () {
        $("#changecheckdatas").append("<li><input   type=\"text\" name=\"change_checkdata_key\"  placeholder=\"Key\"  /><input   type=\"text\" name=\"change_checkdata_value\"  placeholder=\"Value\" /></li>");
    });
    $("#change_delcheckdata").click(function () {
        if ($("#changecheckdatas li").length > 1) {
            $("#changecheckdatas li:last").remove();
        }
    });

    //提交修改的数据
    $("#changesubmitBtn2").click(function () {
        var objectone = {};
        var o = document.querySelectorAll("input[name='change_headers_key']");
        var p = document.querySelectorAll("input[name='change_headers_value']");
        for (var w = 0; w < o.length; w++) {
            var changekeyone = o[w].value;
            var changevalueone = p[w].value;
            objectone[changekeyone] = changevalueone;
        }
        objectonestring = JSON.stringify(objectone);
        $("#changemergeheaders").val(objectonestring);
        console.info(objectonestring);
        var objectthree = {};
        var s = document.querySelectorAll("input[name='change_formdata_key']");
        var t = document.querySelectorAll("input[name='change_formdata_value']");
        for (var y = 0; y < s.length; y++) {
            var keythree = s[y].value;
            var valuethree = t[y].value;
            objectthree[keythree] = valuethree;
        }
        objectthreestring = JSON.stringify(objectthree);
        $("#changemergeformdatas").val(objectthreestring);
        var objectfour = {};
        var u = document.querySelectorAll("input[name='change_checkdata_key']");
        var v = document.querySelectorAll("input[name='change_checkdata_value']");
        for (var z = 0; z < u.length; z++) {
            var keyfour = u[z].value;
            var valuefour = v[z].value;
            objectfour[keyfour] = valuefour;
        }
        objectfourstring = JSON.stringify(objectfour);
        $("#changemergecheckdatas").val(objectfourstring);
    });

    function go_change(id) {
        $("#changesubmitBtn2").click(function () {
            $.ajax({
                cache: false,
                url: "change_singel_data/",
                dataType: 'text',
                type: 'POST',
                async: false,
                data: {
                    "id": id,
                    "change_modelname": $("#changemodel").val(),
                    "change_casename": $("#changecase").val(),
                    "change_URL": $("#changeUrl").val(),
                    "change_Method": $("#changeMethod").val(),
                    "change_mergeheaders": $("#changemergeheaders").val(),
                    "change_mergeformdatas": $("#changemergeformdatas").val(),
                    "change_mergecheckdatas": $("#changemergecheckdatas").val(),
                    "change_charger": $("#changecharger").val(),
                },
                success: function (data) {
                    alert("提交修改成功");
                    window.location.reload();
                },
                error: function (data) {
                    alert("数据重复/提交修改失败");
                }
            });
        });
    }

    //列表数据一旦超过30个字符串就只显示，25个字符串+...
    function display() {
        var elements = $("#table").find("td");
        //当鼠标在列表上悬停时，出现内容
        $("#td").mouseover(function () {
            $("#td").tooltip;
        });
    }
</script>
</body>
</html>
